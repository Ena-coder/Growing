捕获全英文的js[教程网站](https://javascript.info/proxy?tdsourcetag=s_pctim_aiomsg#reflect)



小程序的改动

index.js

```js
Page({
  data: {
    userName:'',
    deptName:'',
    headPic: '', //新增
    ....
```

```js
success: function (res) {
              console.log(res,'res')
              _this.setData({
                isLogin:true
              })
              if (res.data.data && res.data.data.userInfoVO) { //新增
                _this.setData({
                  userName:res.data.data.userInfoVO.personName,
                  deptName:res.data.data.userInfoVO.deptFullNames,
                  headPic:res.data.data.userInfoVO.headPic,
                })
              }
              app.globalData.userCode=res.data.data.userId
             
              _this.getUserId(res.data.data.userId)

            },
```

```js
request.getData('/api/v1/getUserInfo?userCode='+code, {},res => {
      if(res){
        this.getCode(code)
        app.globalData.userId=res.id
        app.globalData.orgId=res.companyid
        app.globalData.deptId=res.departmentid
        app.globalData.deptName=res.departmentname
        app.globalData.orgName=res.companyname
        app.globalData.userName=res.showname
        /*删除
        this.setData({
        userName:res.showname,
        deptName:res.departmentname
        })
        */
      }else{
        app.globalData.userId=101
        app.globalData.orgId=0
        app.globalData.deptId=0
        app.globalData.deptName='安健环管理部'
        app.globalData.orgName='广州发展集团股份有限公司'
        app.globalData.userName='洪威'
```

index.html

```html
<view class="top-info">
    <image mode="widthFix" src="../../image/head-bg.png" style="width:100%"></image>
    <image mode="widthFix" src="{{headPic ? headPic : '../../image/head-default.png'}}" style="width:96rpx;border-radius: 50%;" class="head-default"></image><!--修改-->
    <view class="person-info">
      <view>{{userName || '-'}}</view><!--修改-->
      <view class="deptname">{{deptName || '-'}}</view><!--修改-->
    </view>
  </view>
```

现在的情况是如果设了

工具栏上如果有暂无数据页面并且能正常点击，pointer-events: none;

信息tab栏如果有暂无数据页面并且能正常点击，pointer-events: auto；

这个怎么回事？我该怎么协调，最后使用父传子决定是否添加这个style样式